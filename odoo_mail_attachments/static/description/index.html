<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils: http://docutils.sourceforge.net/" />
<title>README.rst</title>
<style type="text/css">

body {
    font-family: Open Sans,sans-serif;
    max-width: 1300px;
    margin: 0 auto;
}

a {
    text-decoration: none;
    color: #0ad;
}

a:hover {
    color: #00779b;
}

 h1 {
    margin-bottom: 2rem;
}

 div {
    margin: 2rem 0 2rem 0;
}

 p {
    margin: 1rem 0 1rem;
     line-height: 1.5rem;

}

 li {
    margin: 0.5rem 0 0 0;
    line-height: 1.2rem;
}

 div > img {
    display: block;
    margin: 3rem auto 3rem auto;
}

.title {
    text-align: center;
}

div.document:first-of-type > p:first-of-type {
    text-align: center;
    margin-bottom: 8rem;
}

</style>
</head>
<body>
<div class="document">


<img alt="Alliantum" class="align-center" src="alliantum.png" style="width: 70.0%;" />
<div class="section" id="mails-dynamic-attachments">
<h1>Mails Dynamic Attachments</h1>
<!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!! This file is generated by oca-gen-addon-readme !!
!! changes will be overwritten.                   !!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
<p><a class="reference external" href="https://alliantum.com/development-status"><img alt="Beta" src="https://shields.io/badge/Beta-yellow?style=for-the-badge&amp;label=Maturity" /></a> <a class="reference external" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://shields.io/badge/AGPL--3-blue?style=for-the-badge&amp;label=License" /></a> <a class="reference external" href="https://github.com/Alliantum/odoo_mail_attachments/tree/master"><img alt="Alliantum/odoo_mail_attachments" src="https://shields.io/badge/Alliantum%2fodoo_mail_attachments-24c3f3?style=for-the-badge&amp;logo=github&amp;label=github" /></a></p>
<p>By default, Odoo provides us with options to attach certain documents to
our email templates. They can be both, static files, like images, pdf,
text files… and also dynamic reports that are generated depending on the
current record, like for example a SO pdf to be sent to your customer.</p>
<p>But what happens when you would like to add more dynamic attachments,
like for example, not just the SO document, but also the Delivery Slips
of the related shipping for that SO? And even, do this just under
certain circumstances! That’s the point where this module become handy.</p>
<p>With this module you can start creating rules for objects like Sales
Order, Invoices, Purchases or another, that will decide which pdf
document will be attached to the emails sent from the context actions of
that object. The power of this module is that those pdf Documents can be
generated dynamically from related objects to the current one.</p>
<p>The rules will allow you to define under which circumstances, depending
on the fields of the current object you want the attachments to be
generated, filter the related objects, attach static files based on
rules, and attach static files based on languages.</p>
<p><strong>Table of contents</strong></p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#configuration" id="id1">Configuration</a></li>
<li><a class="reference internal" href="#usage" id="id2">Usage</a></li>
<li><a class="reference internal" href="#bug-tracker" id="id3">Bug Tracker</a></li>
<li><a class="reference internal" href="#credits" id="id4">Credits</a><ul>
<li><a class="reference internal" href="#authors" id="id5">Authors</a></li>
<li><a class="reference internal" href="#contributors" id="id6">Contributors</a></li>
<li><a class="reference internal" href="#other-credits" id="id7">Other credits</a></li>
<li><a class="reference internal" href="#maintainers" id="id8">Maintainers</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="configuration">
<h2><a class="toc-backref" href="#id1">Configuration</a></h2>
<ol class="arabic simple">
<li>In order to add dynamically attachment to your emails. You must go to
Settings / General Settings and scroll down to the bottom. A new
section <tt class="docutils literal">Dynamic Mail Attachments</tt> will have appeared there, then
click on Manage button to launch the wizard and start creating rules.</li>
</ol>
<img alt="Alliantum" class="align-center" src="settings.png" style="width: 70.0%;" />
<ol class="arabic simple" start="2">
<li>Start adding attachments is very easy, just click <tt class="docutils literal">Add a line</tt>,
then select the Model on which the current line will apply (for
example, when sending an email from a Sale Order), and also decide
the pdf Report to be used.</li>
</ol>
<img alt="Alliantum" class="align-center" src="model_and_template.png" style="width: 70.0%;" />
<ol class="arabic simple" start="3">
<li>Now it’s very important to pay attention to the
<tt class="docutils literal">Path to Report Model</tt> field. Here you need to enter the path to
follow starting from the <tt class="docutils literal">Trigger Model</tt> to the records that will
be used by the Report. For doing this you can use dot notation when
needed (see example below), in picture picture, it’s just
<strong>``picking_ids``</strong>. In case you don’t have access to the code used
for create the objects, you can activate the developer mode in Odoo,
and hover the fields to get the technical name of the field.</li>
</ol>
<p>For example:</p>
<ul class="simple">
<li>Your rule applies to Sale Order, then if you want to attach the
Delivery Slip to a Sale Order, you simply have to enter
‘picking_ids’.</li>
<li>But, if your rule applies to Invoices for example, you will need
maybe something like,
‘invoice_line_ids.sale_line_ids.order_id.picking_ids’. Notice here
how the x2many fields are including here all the possible existing
records.</li>
</ul>
<img alt="Alliantum" class="align-center" src="path.png" style="width: 70.0%;" />
<ol class="arabic simple" start="4">
<li>Filtering is also available to decide in which circumstances our rule
line will take action. If you just need to attach certain file for a
Sale Order, which Customer has some special value in a concrete
field, let’s say, <tt class="docutils literal">partner_id.is_premium</tt>, then you can use the
button <strong>Add Filter</strong> to enter a domain that matches your needs.
Something similar can be also done for the related object, in our
examples the Delivery.</li>
</ol>
<img alt="Alliantum" class="align-center" src="filtering.png" style="width: 70.0%;" />
<ol class="arabic simple" start="5">
<li>Continuing with more extra options, we can for instance attache
static files in a couple of ways, one for adding to your email
attachments that were already loaded in Odoo, or to upload on the fly
a new one that really suits you.</li>
<li>And finally, there’s a powerful way of attaching files based on the
language of one of the related records of the correct object (images
that includes text, Terms and Conditions, or any other kind of
document). You can think of it like, again, in a SO, when we need to
attach some file in the language of our customer. Let’s say, that in
out Sales Order, our Customer has set <tt class="docutils literal">Language</tt> to French, in such
a case, our configuration line will look like this:</li>
</ol>
<img alt="Alliantum" class="align-center" src="attach_languages.png" style="width: 70.0%;" />
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id2">Usage</a></h2>
<p>Once everything is configured, the only thing you need to do is go ahead
to one of the objects that allow sending emails, and try sending one of
them, for one record that matched your rules criteria. Then in the
chatter, you should find the attachments that applies in that case.</p>
</div>
<div class="section" id="bug-tracker">
<h2><a class="toc-backref" href="#id3">Bug Tracker</a></h2>
<p>Bugs are tracked on <a class="reference external" href="https://github.com/Alliantum/odoo_mail_attachments/issues">GitHub Issues</a>.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us smashing it by providing a detailed and welcomed
<a class="reference external" href="https://github.com/Alliantum/odoo_mail_attachments/issues/new?body=module:%20odoo_mail_attachments%0Aversion:%20master%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
<p>Do not contact contributors directly about support or help with technical issues.</p>
</div>
<div class="section" id="credits">
<h2><a class="toc-backref" href="#id4">Credits</a></h2>
<div class="section" id="authors">
<h3><a class="toc-backref" href="#id5">Authors</a></h3>
<ul class="simple">
<li>Alliantum</li>
</ul>
</div>
<div class="section" id="contributors">
<h3><a class="toc-backref" href="#id6">Contributors</a></h3>
<ul class="simple">
<li>David Moreno <a class="reference external" href="mailto:david.moreno&#64;alliantum.com">david.moreno&#64;alliantum.com</a></li>
</ul>
</div>
<div class="section" id="other-credits">
<h3><a class="toc-backref" href="#id7">Other credits</a></h3>
<p>The development of this module has been financially supported by:</p>
<ul class="simple">
<li>Alliantum (<a class="reference external" href="https://www.alliantum.com">https://www.alliantum.com</a>)</li>
</ul>
</div>
<div class="section" id="maintainers">
<h3><a class="toc-backref" href="#id8">Maintainers</a></h3>
<p>This module is maintained by Alliantum.</p>
<a class="reference external image-reference" href="https://alliantum.com"><img alt="Alliantum" src="https://avatars.githubusercontent.com/u/68618709?s=200&amp;v=4" /></a>
<p>Alliantum, is a company whose
mission is to support the widespread use of Odoo by others companies, and collaborate in the development of new Odoo features.</p>
<p>This module is part of the <a class="reference external" href="https://github.com/Alliantum/odoo_public_modules">Alliantum/odoo_public_modules</a> project on GitHub.</p>
<p>You are welcome to contribute. To learn how please visit <a class="reference external" href="https://github.com/Alliantum/odoo_public_modules">https://github.com/Alliantum/odoo_public_modules</a>.</p>
</div>
</div>
</div>
</div>
</body>
</html>
